<header class="header">
  <div class="header-logo-wrapper">
    <a class="header-logo" (click)="clickItem({ id: 'homepage', url: urlHomepage, newTab: true })">
      <img [src]="environment.platformLogoPath" alt="Platform logo" />
    </a>
    <div class="title">
      <p class="main"></p>
      <p class="version">
        {{ title }}
        <sup (click)="openNewFeaturesDialog()">{{ version }}</sup>
      </p>
    </div>
  </div>
  <div class="header-actions-wrapper">
    <ul>


      <!-- START OF MetadataPreview -->
      <ng-container *ngIf="user !== null">
        <mat-slide-toggle class="custom-slide-toggle" [(ngModel)]="metadataPreviewModeActive" (toggleChange)="toggleMetadataPreviewMode()"></mat-slide-toggle>
        <li *ngIf="!metadataPreviewModeActive; then metadataFeatureLabel else metadataFeature">

        </li>

      </ng-container>
      <ng-template #metadataFeatureLabel>
        <span class="metadata-toggle-label-span">MetadataPreview</span>
      </ng-template>
      <ng-template #metadataFeature>
        <mat-form-field>
          <mat-label>{{ "Metadata Preview" }}</mat-label>
          <mat-select #typesSelect multiple [(value)]="selectedStatus" (valueChange)="typesToggleSelected(selectedStatus)" [panelClass]="'custom-panel-class'">
            <mat-select-trigger>{{ selectedStatus }}</mat-select-trigger>
            <mat-option *ngFor="let type of metadataStatuses" [value]="type.value" >
              {{ type.label }}
              <i class="fa-solid fa-circle" [ngClass]="type.color"></i>
            </mat-option>
          </mat-select>
        </mat-form-field>
      </ng-template>
      <!-- END OF MetadataPreview -->


      <!-- Scientific Examples -->
      <li *ngIf="environment.showScientificExamples === true">
        <div class="nav-top-items-item guest">
          <a class="nav-top-items-item-text" (click)="scientficExamples()" data-toggle="dropdown">
            <mat-icon>summarize</mat-icon>
            <span class="hidden-xs text">ECVs Use Cases</span>
          </a>
        </div>
      </li>
      <!-- Share -->
      <li *ngIf="environment.menuShare === true">
        <div class="nav-top-items-item guest">
          <!-- app-menu [trigger]="shareMenu[0]" [data]="shareMenu" [isRootNode]="true" [root]="{ name: 'Share', icon: 'share' }"></app-menu -->
          <a class="nav-top-items-item-text" (click)="share()" data-toggle="dropdown">
            <mat-icon>share</mat-icon>
            <span class="hidden-xs text">Share</span>
          </a>
        </div>
      </li>
      <!-- Login -->
      <li>
        <div class="nav-top-items-item guest" [ngClass]="{ 'nav-top-items-item--active': this.dropdown === 'user' }">
          <a class="nav-top-items-item-text" (click)="toggleDropdown('user')" data-toggle="dropdown">
            <mat-icon>person</mat-icon>
            <span class="hidden-xs text">
              {{ user !== null ? '' : 'Login' }}
            </span>
          </a>
          <div [hidden]="this.dropdown !== 'user'" class="dropdown-menu dropdown-menu--userdropdown">
            <div class="dropdown-menu-header">
              <p class="dropdown-menu-header-username">
                {{ user?.getUsername() || 'User Guest' }}
              </p>
            </div>
            <div class="dropdown-menu-footer">
              <div class="wrapper">
                <div class="column-12">
                  <app-login (closeDropdown)="toggleDropdown('user')"></app-login>
                </div>
              </div>
              <div id="sign-in-message" class="pull-left" style="color: red"></div>
            </div>
          </div>
        </div>
      </li>
      <!-- Menu -->
      <li>
        <div
          class="nav-top-items-item guest"
          [ngClass]="{ 'nav-top-items-item--active': this.dropdown === 'menu' }"
          appTour
          tourName="EPOS Overview"
          tourStage="21"
          tourDescription="The tour can be accessed again from this menu."
          tourTitle="Tour Complete!"
          tourPosition="left"
          (tourForwardFunction)="handleTourFinish()">
          <app-menu [trigger]="initialMenuData[0]" [data]="initialMenuData" [isRootNode]="true"></app-menu>
        </div>
      </li>
    </ul>
  </div>
</header>
